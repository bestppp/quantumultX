// å»ºè¡ŒAPPç§¯åˆ†é¡µé¢æ£€æµ‹å™¨
if (typeof $response !== 'undefined') {
    // æ£€æµ‹æ˜¯å¦åœ¨ç§¯åˆ†é¡µé¢
    if ($request.url.includes('points/home')) {
        const now = Date.now();
        const lastSignTime = $prefs.valueForKey("ccb_last_sign") || 0;
        
        // å½“å¤©æœªç­¾åˆ°ä¸”ä¸æ˜¯é¦–æ¬¡åŠ è½½
        if (now - lastSignTime > 86400000) {
            $notification.post(
                "ðŸ”” æ£€æµ‹åˆ°ç§¯åˆ†é¡µé¢", 
                "æ­£åœ¨è‡ªåŠ¨ç­¾åˆ°...", 
                "è¯·å‹¿å…³é—­APP",
                { "open-url": "ccbcloud://" }
            );
            
            // å»¶è¿Ÿæ‰§è¡Œç­¾åˆ°
            $task.delay({
                seconds: 2
            }, () => {
                $task.run({
                    script: $prefs.valueForKey("ccb_sign_url") || "https://raw.githubusercontent.com/yourname/repo/main/ccb_sign.js"
                });
            });
        }
    }
    $done({});
}
